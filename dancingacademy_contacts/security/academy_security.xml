<odoo>
    <!-- Grupos -->
    <record id="group_academy_directivo" model="res.groups">
        <field name="name">Equipo Directivo</field>
    </record>
    <record id="group_academy_profesor" model="res.groups">
        <field name="name">Profesor</field>
        <field name="implied_ids" eval="[(4, ref('group_academy_directivo'))]"/>
    </record>
    <record id="group_academy_bailarin" model="res.groups">
        <field name="name">Bailar√≠n</field>
        <field name="implied_ids" eval="[(4, ref('group_academy_profesor'))]"/>
    </record>

    <!-- Reglas de acceso -->
    <record id="academy_member_rule_directivo" model="ir.rule">
        <field name="name">Directivo Access</field>
        <field name="model_id" ref="model_academy_member"/>
        <field name="groups" eval="[(4, ref('group_academy_directivo'))]"/>
        <field name="domain_force">[]</field>
    </record>
    
    <record id="academy_member_rule_profesor" model="ir.rule">
        <field name="name">Profesor Access</field>
        <field name="model_id" ref="model_academy_member"/>
        <field name="groups" eval="[(4, ref('group_academy_profesor'))]"/>
        <field name="domain_force">[
            '|', 
            ('id', 'in', [rec.id for rec in user.student_ids]), 
            ('member_type', 'in', ['profesor', 'directivo'])
        ]</field>
    </record>

    <record id="academy_member_rule_bailarin" model="ir.rule">
        <field name="name">Bailarin Access</field>
        <field name="model_id" ref="model_academy_member"/>
        <field name="groups" eval="[(4, ref('group_academy_bailarin'))]"/>
        <field name="domain_force">[('member_type', '!=', 'bailarin')]</field>
    </record>
</odoo>